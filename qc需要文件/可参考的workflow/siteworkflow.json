{
    "workflow": {
      "id": "siteworkflow_v2.0",
      "name": "增强版site工作流",
      "description": "支持完整四参数结构的站点测试流程",
      "version": "4.0",
      "steps": [
        {
          "id": "siteworkflow_001",
          "type": "Delay",
          "name": "等待站点创建完毕",
          "config": {
            "durationMs": 2000
          }
        },
        {
          "id": "step_door_05",
          "type": "DeviceCommand",
          "name": "🔧 增强上电：自动传递完整四参数结构",
          "config": {
            "deviceId": "door_001",
            "command": "poweron",
            "params": {
              "dutActive": 4,
              "_comment": "现在会自动增强为: devSn=door_001, tagId=0x30000052, enable={socketMask:0x000F, siteIndex:1}"
            }
          }
        },
        {
          "id": "step_handler_03",
          "type": "Delay",
          "name": "等待上电稳定",
          "config": {
            "durationMs": 2000
          }
        },
        {                       
          "id": "step_03",
          "type": "DeviceCommand",
          "name": "步骤3: 设定目标温度 35°C",
          "config": {
            "deviceId": "temp_001",
            "command": "settargettemp",
            "params": { "celsius": 35 }
          }
        },
        {
          "id": "step_door_07",
          "type": "DeviceCommand",
          "name": "🔧 增强数据采集：自动传递完整四参数结构",
          "config": {
            "deviceId": "door_001",
            "command": "startdatacollection",
            "params": {
              "sampleTimes": 5,
              "_comment": "现在会自动增强为: devSn=door_001, tagId=0x30000054, enable={socketMask:计算值, siteIndex:1, sampleTimes:5}"
            }
          }
        },
        {
          "id": "step_delay_01",
          "type": "Delay",
          "name": "等待数据采集完成",
          "config": {
            "durationMs": 3000
          }
        },
        {                       
          "id": "step_04",
          "type": "DeviceCommand",
          "name": "步骤4: 设定目标温度 45°C",
          "config": {
            "deviceId": "temp_001",
            "command": "settargettemp",
            "params": { "celsius": 45 }
          }
        },
        {
          "id": "step_door_08",
          "type": "DeviceCommand",
          "name": "🔧 站点级数据采集：支持多站点并行",
          "config": {
            "deviceId": "door_001的site01",
            "command": "startdatacollection",
            "params": {
              "sampleTimes": 5,
              "_comment": "站点级命令：从deviceId自动提取站点索引(site01->1)，传递正确的siteIndex参数"
            }
          }
        },
        {
          "id": "step_delay_02",
          "type": "Delay",
          "name": "等待站点数据采集完成",
          "config": {
            "durationMs": 3000
          }
        },
        {
          "id": "step_handler_03",
          "type": "Delay",
          "name": "等待处理完成",
          "config": {
            "durationMs": 2000
          }
        },
        {
          "id": "step_handler_05",
          "type": "DeviceCommand",
          "name": "Handler设备: 设置当前线程站点的完成状态",
          "config": {
            "deviceId": "handler_1",
            "command": "setdonesite",
            "params": {
              "siteIdx": 1,
              "results": [1, 1, 0, 0, 0, 0, 0, 0],
              "_comment": "Handler设备指令：告知自动机烧录结果，等待ACK应答"
            }
          }
        },
        {
          "id": "step_final",
          "type": "Delay",
          "name": "等待流程完全结束",
          "config": {
            "durationMs": 2000
          }
        }
      ]
    }
} 