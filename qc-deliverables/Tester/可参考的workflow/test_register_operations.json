{
    "id": "test_register_operations_v1",
    "name": "寄存器操作测试工作流",
    "description": "测试各种寄存器读写操作场景",
    "version": "1.0.0",
    "steps": [
        {
            "id": "step_power_on",
            "name": "设备上电",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "powerOn",
                "params": {
                    "dutActive": 1,
                    "powerMode": "标准模式"
                }
            }
        },
        {
            "id": "step_delay_after_power",
            "name": "等待上电稳定",
            "type": "Delay",
            "config": {
                "durationMs": 2000
            }
        },
        {
            "id": "step_initial_data_collection",
            "name": "初始数据采集",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "getSampleData",
                "params": {
                    "dutActive": 1,
                    "sampleTimes": 3
                }
            }
        },
        {
            "id": "step_delay_after_initial_collection",
            "name": "等待初始数据采集完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_register_read_test",
            "name": "寄存器读取测试",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "executeRegisterOperations",
                "params": {
                    "dutActive": 1,
                    "registers": [
                        {
                            "sAddr": 1,
                            "fc": 0,
                            "rAddr": 130,
                            "data": 132,
                            "len": 4,
                            "remark": "读取寄存器0x82"
                        },
                        {
                            "sAddr": 1,
                            "fc": 0,
                            "rAddr": 128,
                            "data": 0,
                            "len": 2,
                            "remark": "读取寄存器0x80"
                        }
                    ]
                }
            }
        },
        {
            "id": "step_delay_after_read",
            "name": "等待读取测试完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_mid_data_collection",
            "name": "读取测试后数据采集",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "getSampleData",
                "params": {
                    "dutActive": 1,
                    "sampleTimes": 2
                }
            }
        },
        {
            "id": "step_delay_after_mid_collection",
            "name": "等待中间数据采集完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_register_write_test",
            "name": "寄存器写入测试",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "executeRegisterOperations",
                "params": {
                    "dutActive": 1,
                    "registers": [
                        {
                            "sAddr": 1,
                            "fc": 1,
                            "rAddr": 128,
                            "data": 94,
                            "len": 2,
                            "remark": "写入寄存器0x80，值0x5E"
                        },
                        {
                            "sAddr": 1,
                            "fc": 1,
                            "rAddr": 130,
                            "data": 140,
                            "len": 3,
                            "remark": "写入寄存器0x82，值0x8C"
                        }
                    ]
                }
            }
        },
        {
            "id": "step_delay_after_write",
            "name": "等待写入测试完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_write_data_collection",
            "name": "写入测试后数据采集",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "getSampleData",
                "params": {
                    "dutActive": 1,
                    "sampleTimes": 2
                }
            }
        },
        {
            "id": "step_delay_after_write_collection",
            "name": "等待写入后数据采集完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_register_mixed_test",
            "name": "混合读写测试",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "executeRegisterOperations",
                "params": {
                    "dutActive": 1,
                    "registers": [
                        {
                            "sAddr": 1,
                            "fc": 0,
                            "rAddr": 130,
                            "data": 132,
                            "len": 4,
                            "remark": "先读取寄存器0x82"
                        },
                        {
                            "sAddr": 1,
                            "fc": 1,
                            "rAddr": 128,
                            "data": 94,
                            "len": 2,
                            "remark": "再写入寄存器0x80"
                        },
                        {
                            "sAddr": 1,
                            "fc": 1,
                            "rAddr": 130,
                            "data": 140,
                            "len": 3,
                            "remark": "最后写入寄存器0x82"
                        }
                    ]
                }
            }
        },
        {
            "id": "step_delay_after_mixed",
            "name": "等待混合测试完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_mixed_data_collection",
            "name": "混合测试后数据采集",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "getSampleData",
                "params": {
                    "dutActive": 1,
                    "sampleTimes": 3
                }
            }
        },
        {
            "id": "step_delay_after_mixed_collection",
            "name": "等待混合测试后数据采集完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_verify_read",
            "name": "验证读取结果",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "executeRegisterOperations",
                "params": {
                    "dutActive": 1,
                    "registers": [
                        {
                            "sAddr": 1,
                            "fc": 0,
                            "rAddr": 128,
                            "data": 0,
                            "len": 2,
                            "remark": "验证寄存器0x80的值"
                        },
                        {
                            "sAddr": 1,
                            "fc": 0,
                            "rAddr": 130,
                            "data": 0,
                            "len": 4,
                            "remark": "验证寄存器0x82的值"
                        }
                    ]
                }
            }
        },
        {
            "id": "step_delay_after_verify",
            "name": "等待验证测试完成",
            "type": "Delay",
            "config": {
                "durationMs": 1000
            }
        },
        {
            "id": "step_final_data_collection",
            "name": "最终数据采集",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "getSampleData",
                "params": {
                    "dutActive": 1,
                    "sampleTimes": 5
                }
            }
        },
        {
            "id": "step_delay_before_power_off",
            "name": "等待最终数据采集完成",
            "type": "Delay",
            "config": {
                "durationMs": 2000
            }
        },
        {
            "id": "step_power_off",
            "name": "设备下电",
            "type": "DeviceCommand",
            "config": {
                "deviceId": "door_001",
                "command": "powerOff",
                "params": {
                    "dutActive": 1
                }
            }
        }
    ]
} 