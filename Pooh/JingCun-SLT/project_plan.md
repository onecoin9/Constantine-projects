# 晶存 SLT 项目开发计划

> **项目名称**: JingCun System Level Test (SLT) 测试系统  
> **启动日期**: 2025-10-20  
> **目标完成日期**: 2025-11-30  
> **更新时间**: 2025-10-23

---

## 项目概述

晶存 SLT 测试系统是一个多层级的自动化测试框架,包括:
- **JC Tester**: 主控测试程序(C++ Qt 应用)
- **AC App**: 50个小型工控机客户端(从 VB 迁移至 C++)
- **Handler**: 测试治具接口层(JsonRPC 通讯)

核心目标: 实现 16 路 DUT 并行测试、实时状态监控、完整日志记录与分析。

---

## 功能模块清单与时间表

### 功能 1: 用户管理系统

**目标**: 支持多角色登录、界面权限隔离、模式切换

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-23 ~ 10-25 | 需求分析、UI 原型设计 | ⬜ 未开始 | - | 定义用户角色、权限等级 |
| 10-26 ~ 10-28 | 用户数据模型设计、数据库表设计 | ⬜ 未开始 | - | 支持本地存储与远程认证 |
| 10-29 ~ 10-31 | 登录界面与鉴权模块开发 | ⬜ 未开始 | - | 密码加密、会话管理 |
| 11-01 ~ 11-03 | 角色权限管理功能实现 | ⬜ 未开始 | - | 菜单/按钮权限控制 |
| 11-04 ~ 11-05 | 界面状态区分显示(只读/编辑模式) | ⬜ 未开始 | - | 根据用户角色动态调整 UI |
| 11-06 | 单元测试 + 集成测试 | ⬜ 未开始 | - | 覆盖多角色场景 |

**完成度**: 0%  
**关键依赖**: 无  
**风险**: 权限模型复杂度、数据库选型

---

### 功能 2: 小型工控机 AC App 重写 (VB → C++)

**目标**: 完整迁移现有 VB 实现至 C++,实现与 JCApp/Tester 的交互

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-23 ~ 10-26 | VB 代码分析、架构设计、C++ 框架搭建 | ⬜ 未开始 | - | 理解现有逻辑、设计新架构 |
| 10-27 ~ 11-02 | 核心业务逻辑迁移(60%) | ⬜ 未开始 | - | 设备驱动、测试控制 |
| 11-03 ~ 11-07 | JsonRPC 客户端实现 | ⬜ 未开始 | - | 与 JCApp/Tester 通讯 |
| 11-08 ~ 11-10 | 单元测试与本地调试 | ⬜ 未开始 | - | 验证逻辑正确性 |
| 11-11 ~ 11-12 | 50 台工控机部署与集成测试 | ⬜ 未开始 | - | 网络兼容性、负载测试 |

**完成度**: 0%  
**关键依赖**: 需获取完整 VB 源码  
**风险**: VB 特性不兼容、网络环境复杂性

---

### 功能 3: DUT 测试状态获取与 GUI 展示

**目标**: 实时获取 DUT 测试状态、结果、温度压力值,并在界面展示

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-23 ~ 10-25 | 数据模型设计(16 路 DUT + 状态字段) | ⬜ 未开始 | - | 定义状态机、数据结构 |
| 10-26 ~ 10-28 | Tester ↔ 50 个 AC App 的通讯协议 | ⬜ 未开始 | - | JsonRPC/TCP 方案选型 |
| 10-29 ~ 11-02 | Tester ↔ ASC (Handler) 的通讯对接 | ⬜ 未开始 | - | 获取实时温度、压力数据 |
| 11-03 ~ 11-06 | GUI 仪表盘设计与实现(Qt) | ⬜ 未开始 | - | 状态卡片、实时图表、告警显示 |
| 11-07 ~ 11-09 | 数据刷新优化、性能测试 | ⬜ 未开始 | - | 50 个客户端并发更新 |
| 11-10 | 联合集成测试 | ⬜ 未开始 | - | 验证端到端数据流 |

**完成度**: 0%  
**关键依赖**: 功能 2 的交互逻辑、ASC 接口定义  
**风险**: 网络延迟、数据同步一致性

---

### 功能 4: DUT 测试日志获取与存储

**目标**: 完整收集 16 路 DUT 的测试日志,按批次/Rack/Slot 分层存储

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-26 ~ 10-28 | 日志数据模型设计、文件夹结构定义 | ⬜ 未开始 | - | Batch/{Rack}/{Slot}/log.txt 方案 |
| 10-29 ~ 11-01 | AC App 侧日志收集与上传机制 | ⬜ 未开始 | - | 测试完成后自动生成日志 |
| 11-02 ~ 11-04 | Tester 侧日志聚合与分层存储 | ⬜ 未开始 | - | 本地持久化、数据库备份 |
| 11-05 ~ 11-07 | 日志查询界面(按批次/Rack/Slot 过滤) | ⬜ 未开始 | - | 导出 CSV/Excel |
| 11-08 | 存储性能与容量评估 | ⬜ 未开始 | - | 日志去重、压缩策略 |

**完成度**: 0%  
**关键依赖**: 功能 2、功能 3 的通讯基础  
**风险**: I/O 性能、存储容量规划

---

### 功能 5: 小型工控机远程控制

**目标**: 通过远程桌面/SSH 操作 50 台工控机进行故障排查、软件更新等

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-30 ~ 11-02 | 远程控制方案选型(RDP/VNC/SSH) | ⬜ 未开始 | - | 评估安全性、易用性、网络兼容性 |
| 11-03 ~ 11-05 | Tester GUI 远程控制集成 | ⬜ 未开始 | - | 按工控机编号快速选择与连接 |
| 11-06 ~ 11-08 | 50 台工控机远程连通性测试 | ⬜ 未开始 | - | 网络隔离、防火墙配置 |
| 11-09 | 文档与操作手册编制 | ⬜ 未开始 | - | 快捷键、常见问题 |

**完成度**: 0%  
**关键依赖**: 工控机网络环境配置  
**风险**: 网络安全与隔离设计

---

### 功能 6: Handler 对接任务(JsonRPC 通讯)

**目标**: 实现 Tester ↔ Handler(治具控制层) 的 JsonRPC 双向通讯

| 时间段 | 任务 | 状态 | 负责人 | 备注 |
|--------|------|------|--------|------|
| 10-23 ~ 10-25 | JsonRPC 通讯协议设计(接口清单、错误码) | ⬜ 未开始 | - | 定义 method、params、response 格式 |
| 10-26 ~ 10-29 | Tester 侧 JsonRPC 客户端实现(Qt) | ⬜ 未开始 | - | 支持异步调用、超时重试 |
| 10-30 ~ 11-02 | Handler 侧 JsonRPC 服务端改造 | ⬜ 未开始 | - | 与现有治具驱动层集成 |
| 11-03 ~ 11-05 | 端到端通讯测试、性能优化 | ⬜ 未开始 | - | 延迟、吞吐量评估 |
| 11-06 | 文档补充与联调 | ⬜ 未开始 | - | 接口文档、示例代码 |

**完成度**: 0%  
**关键依赖**: Handler 现有架构文档  
**风险**: 协议版本兼容性、实时性要求

---

## 项目里程碑

| 里程碑 | 目标完成日期 | 验收标准 |
|--------|------------|---------|
| **M1: 需求冻结 + 架构设计** | 2025-10-27 | 所有功能需求文档化、架构图评审通过 |
| **M2: 用户管理 + AC App 框架** | 2025-11-03 | 登录鉴权可用、AC App 框架搭建完成 |
| **M3: 核心通讯(Handler/AC App)** | 2025-11-10 | JsonRPC 通讯贯通、基础数据流可达 |
| **M4: GUI 仪表盘 + 日志系统** | 2025-11-17 | 16 路 DUT 实时显示、日志完整存储 |
| **M5: 50 台工控机集成测试** | 2025-11-24 | 所有功能在实际环境验证通过 |
| **M6: 项目验收 + 文档交付** | 2025-11-30 | 完整运维文档、用户手册、源代码交付 |

---

## 工作量评估与人力配置

| 功能模块 | 预估周期 | 最少人力 | 风险等级 | 备注 |
|---------|---------|--------|---------|------|
| 功能 1: 用户管理 | 2 周 | 1 人 | 🟡 中 | 权限模型需评审 |
| 功能 2: AC App 重写 | 3 周 | 2 人 | 🔴 高 | VB 代码分析耗时、兼容性风险 |
| 功能 3: DUT 状态获取 | 2.5 周 | 1.5 人 | 🔴 高 | 并发通讯、性能优化复杂 |
| 功能 4: 日志存储 | 1.5 周 | 1 人 | 🟡 中 | 存储策略需规划 |
| 功能 5: 远程控制 | 1 周 | 0.5 人 | 🟢 低 | 对接现有远程工具 |
| 功能 6: JsonRPC 对接 | 1.5 周 | 1 人 | 🟡 中 | 协议设计需早期确认 |
| **总计** | **11 周** | **7 人周** | - | 建议 2-3 人并行开发 |

---

## 风险管理

### 高风险项

1. **AC App VB → C++ 迁移** 🔴
   - 风险: VB 特性不完全兼容、业务逻辑复杂度高
   - 缓解: 提前获取完整源码、设计详细迁移计划、并行开发原型

2. **50 台工控机并发通讯** 🔴
   - 风险: 网络延迟、数据同步不一致、部分机器掉线
   - 缓解: 设计心跳机制、离线缓存、优先级队列

3. **DUT 状态实时同步** 🔴
   - 风险: 16 路 DUT × 50 机 = 800 个数据点并发更新
   - 缓解: 采用发布-订阅模式、数据压缩、定时同步而非实时

### 中风险项

4. **JsonRPC 协议兼容性** 🟡
   - 风险: Handler 现有实现与新需求冲突
   - 缓解: 早期联合设计、版本协商机制

5. **用户管理权限模型** 🟡
   - 风险: 权限粒度不足或过度、维护成本高
   - 缓解: 参考行业标准、设计通用的 RBAC 框架

---

## 进度跟踪(每周更新)

### 第 1 周 (10-23 ~ 10-29)

- [ ] 功能 1-6 的需求评审完成
- [ ] AC App VB 源码获取与分析
- [ ] Handler JsonRPC 协议草案
- [ ] UI 原型设计评审

**周完成度**: 0%

### 第 2 周 (10-30 ~ 11-05)

- [ ] 用户管理模块数据库设计完成
- [ ] AC App C++ 框架搭建完成
- [ ] DUT 数据模型设计完成
- [ ] JsonRPC 接口清单冻结

**周完成度**: 0%

### 第 3 周 (11-06 ~ 11-12)

- [ ] 用户管理功能 60% 完成
- [ ] AC App 核心业务逻辑迁移 50% 完成
- [ ] GUI 仪表盘原型完成
- [ ] JsonRPC 通讯贯通

**周完成度**: 0%

### 第 4 周 (11-13 ~ 11-19)

- [ ] 用户管理功能 100% 完成
- [ ] AC App 完成 80%,进入集成测试
- [ ] DUT 日志系统完成
- [ ] 50 台工控机网络环境准备

**周完成度**: 0%

### 第 5 周 (11-20 ~ 11-26)

- [ ] AC App 完成 100%,所有工控机部署
- [ ] 功能 3-6 集成测试启动
- [ ] 性能测试与优化

**周完成度**: 0%

### 第 6 周 (11-27 ~ 11-30)

- [ ] 所有功能验收测试通过
- [ ] 文档与手册交付
- [ ] 项目总结

**周完成度**: 0%

---

## 依赖与前置条件

### 外部依赖

- [ ] VB 源代码完整交付(功能 2 前置)
- [ ] Handler 现有架构文档与源码(功能 6 前置)
- [ ] 50 台工控机硬件与网络环境准备(功能 2、5 前置)
- [ ] ASC 接口文档与测试环境(功能 3 前置)

### 内部依赖

- 功能 2 → 功能 3、功能 4(通讯基础)
- 功能 1 → 功能 3(权限隔离)
- 功能 6 → 功能 3(实时数据)

---

## 技术栈与工具

| 组件 | 技术栈 | 备注 |
|------|--------|------|
| Tester 主应用 | C++ 17 + Qt 5.15 | 跨平台 GUI |
| AC App | C++ 17 (从 VB 迁移) | Windows/Linux |
| 通讯协议 | JsonRPC 2.0 over TCP/HTTP | 规范化 |
| 数据库 | SQLite / MySQL | 本地/集中式可选 |
| 日志框架 | spdlog + 自定义格式 | 高性能 |
| 远程控制 | RDP / VNC (OpenSSH) | 通用方案 |
| 构建工具 | CMake 3.16+ / Qt Creator | 跨平台编译 |
| 版本控制 | Git (Constantine-projects) | 现有仓库 |

---

## 文档清单

在项目进行过程中需生成/更新以下文档:

- [ ] **需求规格说明书** (10-27 前完成)
- [ ] **系统架构设计文档** (10-27 前完成)
- [ ] **JsonRPC 接口规范** (10-29 前完成)
- [ ] **数据库设计文档** (11-03 前完成)
- [ ] **用户手册** (11-30 前完成)
- [ ] **运维手册** (11-30 前完成)
- [ ] **测试报告** (11-30 前完成)
- [ ] **源代码注释与 API 文档** (持续)

---

## 附录: 快速参考

### 关键联系人

- **项目经理**: (待填)
- **AC App VB 源码维护人**: (待填)
- **Handler 系统架构师**: (待填)
- **硬件/工控机环境**: (待填)

### 重要会议

- **周一 10:00** - 周例会(进度同步)
- **周三 15:00** - 技术评审(架构/关键决策)
- **周五 17:00** - 周总结

### 问题跟踪

所有 Issue 和 Risk 统一记录在: [JingCun-SLT Issues](TODO: 创建专用 issue tracker)

---

**文档历史**:

| 版本 | 日期 | 更新内容 | 作者 |
|------|------|---------|------|
| v1.0 | 2025-10-23 | 初版计划,包含 6 大功能模块与时间表 | Copilot |

