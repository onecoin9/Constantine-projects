MT激活项目上位机_AG06通信协议V1.0

# 引言

本档案用于对MT激活项目AP8000V2上位机_AG06通信协议进行说明

# 本档案适用对象

技术支持工程师

维护工程师

# 版本记录

| 文档版本 | 文档编者 | 发布日期   | 修改说明 |
| -------- | -------- | ---------- | -------- |
| 1.0      | 蔡志明   | 2025/07/31 | 第一版   |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |
|          |          |            |          |

# 通信说明：

## 1.协议说明

本项目强相关的指令采用“PC与MU通信协议设计与命令说明”描述的协议中的“DoCustom”命令进行交互，以下协议描述，均是在描述DoCustom命令的数据域。

另外由于PC跟MU通信协议本身包含crc校验，DoCustom数据域中不在添加校验。

通信格式：<CMD_ID>`<LENGTH><PAYLOAD>`

每个通信包都包含如下

| 成员    | 说明        | 类型     | 长度/Bytes | 备注               |
| ------- | ----------- | -------- | ---------- | ------------------ |
| CMD_ID  | 指令码      | Uint8    | 1          | 用于区分不同的操作 |
| LENGTH  | PAYLOAD长度 | Uint16_t | 2          | <1000              |
| PAYLOAD | 命令数据    | Uint8    | N          |                    |

### 1.1 uid下发0x10

Payload:

| 成员 | 类型   | 长度/Bytes | 备注           |
| ---- | ------ | ---------- | -------------- |
| Uid  | String | 8          | 如“B8200000” |

例： PC->AG06：0x10 | 0x08 0x00 | ‘B’ ’8’ ’2’ ’0’ ’0’ ’0’ ’0’ ’0’

CMD_ID 0x10，长度8， uid=B8200000.

### 1.2 dut trim参数下发0x11

Payload:

| 成员       | 类型    | 长度/Bytes | 备注                        |
| ---------- | ------- | ---------- | --------------------------- |
| 结构化数据 | Uint8_t | n          | 格式参见附件xt_trim_param.h |

### 1.3 dut trim 日志上传0x12

Payload:

| 成员     | 类型   | 长度/Bytes | 备注           |
| -------- | ------ | ---------- | -------------- |
| Uid      | String | 8          | 如“B8200000” |
| 分隔符   | Char   | 1          | 固定为 ’:’   |
| 日志内容 | String | n          | 以\0结尾       |

例：AG06->PC：0x12 | 0x10 0x00 |‘B’ ’8’ ’2’ ’0’ ’0’ ’0’ ’0’ ’0’ ‘:’ ‘1’ ‘2’ ‘3’ ‘4’ ‘5’ ‘6’ 0x00

CMD_ID 0x12，长度16， “B8200000:123456”

注：PC收到消息后，将’:’后的字符串写入以uid命名的txt文档中。
